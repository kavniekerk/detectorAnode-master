// Include "../A00Assembly/mmGasA00Assembly.geo";
// Include "../A00Assembly/mmGasA00AssemblyParam.geo";

// Include "../A00CuG0cp12/mmGasA00CuG0cp12.geo";
// Include "../A00CuG0cp12/mmGasA00CuG0cp12T.geo";
// Include "../A00CuG0cp12/mmGasA00CuG0cp12Bv0.geo";
// Include "../A00CuG0cp12/mmGasA00CuG0cp12CompLab.pro";
// Include "../A00CuG0cp12/mmGasA00CuG0cp12Param.geo";
// Include "../A00CuG0cp12/mmGasA00CuG0cp12ParamT.geo";
// Include "../A00CuG0cp12/mmGasA00CuG0cp12ParamBv0.geo";
// Include "../A00CuG0cp12/mmGasA00CuGP0cp12.geo";
// Include "../A00CuG0cp12/mmGasA00CuGP0cp12Param.geo";

// Include "../A00Bd0pcb12/mmGasA00Bd0pcb12.geo";
// Include "../A00Bd0pcb12/mmGasA00Bd0pcb12T.geo";
// Include "../A00Bd0pcb12/mmGasA00Bd0pcb12CompLab.pro";
// Include "../A00Bd0pcb12/mmGasA00Bd0pcb12Param.geo";
// Include "../A00Bd0pcb12/mmGasA00Bd0pcb12ParamT.geo";

// Include "../A01BdX1pcb12/mmGasA01BdX1pcb12A.geo";
// Include "../A01BdX1pcb12/mmGasA01BdX1pcb12CompLab.pro";
// Include "../A01BdX1pcb12/mmGasA01BdX1pcb12Param.geo";
// Include "../A01BdX1pcb12/mmGasA01BdX1pcb12ParamT.geo";

// Include "../A01CuX1cp12/mmGasA01CuX1cp12.geo";
// Include "../A01CuX1cp12/mmGasA01CuX1cp12T.geo";
// Include "../A01CuX1cp12/mmGasA01CuX1cp12Bv0.geo";
// Include "../A01CuX1cp12/mmGasA01CuX1cp12Bv1.geo";
// Include "../A01CuX1cp12/mmGasA01CuX1cp12Bv2.geo";
// Include "../A01CuX1cp12/mmGasA01CuX1cp12CompLab.pro";
// Include "../A01CuX1cp12/mmGasA01CuX1cp12Param.geo";
// Include "../A01CuX1cp12/mmGasA01CuX1cp12ParamT.geo";
// Include "../A01CuX1cp12/mmGasA01CuX1cp12ParamBv0.geo";
// Include "../A01CuX1cp12/mmGasA01CuX1cp12ParamBv1.geo";
// Include "../A01CuX1cp12/mmGasA01CuX1cp12ParamBv2.geo";

// Include "../A01Bd1pcb12/mmGasA01Bd1pcb12.geo";
// Include "../A01Bd1pcb12/mmGasA01Bd1pcb12T.geo";
// Include "../A01Bd1pcb12/mmGasA01Bd1pcb12CompLab.pro";
// Include "../A01Bd1pcb12/mmGasA01Bd1pcb12Param.geo";
// Include "../A01Bd1pcb12/mmGasA01Bd1pcb12ParamTv0.geo";
// Include "../A01Bd1pcb12/mmGasA01Bd1pcb12ParamTv1.geo";
// Include "../A01Bd1pcb12/mmGasA01Bd1pcb12ParamTv2.geo";

// Include "../A01BdY1pcb12/mmGasA01BdY1pcb12.geo";
// Include "../A01BdY1pcb12/mmGasA01BdY1pcb12T.geo";
// Include "../A01BdY1pcb12/mmGasA01BdY1pcb12CompLab.pro";
// Include "../A01BdY1pcb12/mmGasA01BdY1pcb12Param.geo";
// Include "../A01BdY1pcb12/mmGasA01BdY1pcb12ParamTv0.geo";
// Include "../A01BdY1pcb12/mmGasA01BdY1pcb12ParamTv1.geo";
// Include "../A01BdY1pcb12/mmGasA01BdY1pcb12ParamTv2.geo";

// Include "../A01CuY1cp12/mmGasA01CuY1cp12.geo";
// Include "../A01CuY1cp12/mmGasA01CuY1cp12T.geo";
// Include "../A01CuY1cp12/mmGasA01CuY1cp12Bv0.geo";
// Include "../A01CuY1cp12/mmGasA01CuY1cp12Bv1.geo";
// Include "../A01CuY1cp12/mmGasA01CuY1cp12Bv2.geo";
// Include "../A01CuY1cp12/mmGasA01CuY1cp12CompLab.pro";
// Include "../A01CuY1cp12/mmGasA01CuY1cp12Param.geo";
// Include "../A01CuY1cp12/mmGasA01CuY1cp12ParamBv0.geo";
// Include "../A01CuY1cp12/mmGasA01CuY1cp12ParamBv1.geo";
// Include "../A01CuY1cp12/mmGasA01CuY1cp12ParamBv2.geo";

// Include "../A02Bd2pcb12/mmGasA02Bd2pcb12.geo";
// Include "../A02Bd2pcb12/mmGasA02Bd2pcb12T.geo";
// Include "../A02Bd2pcb12/mmGasA02Bd2pcb12CompLab.pro";
// Include "../A02Bd2pcb12/mmGasA02Bd2pcb12Param.geo";
// Include "../A02Bd2pcb12/mmGasA02Bd2pcb12ParamT.geo";

// Include "../A02BdX2pcb12/mmGasA02BdX2pcb12.geo";
// Include "../A02BdX2pcb12/mmGasA02BdX2pcb12T.geo";
// Include "../A02BdX2pcb12/mmGasA02BdX2pcb12CompLab.pro";
// Include "../A02BdX2pcb12/mmGasA02BdX2pcb12Param.geo";
// Include "../A02BdX2pcb12/mmGasA02BdX2pcb12ParamT.geo";

// Include "../A02CuX2cp12/mmGasA02CuX2cp12.geo";
// Include "../A02CuX2cp12/mmGasA02CuX2cp12T.geo";
// Include "../A02CuX2cp12/mmGasA02CuX2cp12CompLab.pro";
// Include "../A02CuX2cp12/mmGasA02CuX2cp12Param.geo";
// Include "../A02CuX2cp12/mmGasA02CuX2cp12ParamT.geo";

// Include "../A03Bd0pil2cp12/mmGasA03Bd0pil2cp12.geo";
// Include "../A03Bd0pil2cp12/mmGasA03Bd0pil2cp12B.geo";
// Include "../A03Bd0pil2cp12/mmGasA03Bd0pil2cp12CompLab.pro";
// Include "../A03Bd0pil2cp12/mmGasA03Bd0pil2cp12Param.geo";
// Include "../A03Bd0pil2cp12/mmGasA03Bd0pil2cp12ParamT.geo";

// Include "../A04Cur0Wr12/mmGasA04Cur0Wr12.geo";
// Include "../A04Cur0Wr12/mmGasA04Cur0Wr12D2x1Wire.geo";
// Include "../A04Cur0Wr12/mmGasA04Cur0Wr12D2x2y2Wire.geo";
// Include "../A04Cur0Wr12/mmGasA04Cur0Wr12D2y1Wire.geo";
// Include "../A04Cur0Wr12/mmGasA04Cur0Wr12Param.geo";
// Include "../A04Cur0Wr12/mmGasA04Cur0Wr12S1x1y1Wire.geo";
// Include "../A04Cur0Wr12/mmGasA04Cur0Wr12S1x2Wire.geo";
// Include "../A04Cur0Wr12/mmGasA04Cur0Wr12S1y2Wire.geo";
// Include "../A04Cur0Wr12/mmGasA04Cur0Wr12Tx1y1x2y2Wire.geo";

// Include "../A04Str0Wr12/mmGasA04Str0Wr12.geo";
// Include "../A04Str0Wr12/mmGasA04Str0Wr12D2x1Wire.geo";
// Include "../A04Str0Wr12/mmGasA04Str0Wr12D2x2y2Wire.geo";
// Include "../A04Str0Wr12/mmGasA04Str0Wr12D2y1Wire.geo";
// Include "../A04Str0Wr12/mmGasA04Str0Wr12Param.geo";
// Include "../A04Str0Wr12/mmGasA04Str0Wr12S1x1y1Wire.geo";
// Include "../A04Str0Wr12/mmGasA04Str0Wr12S1x2Wire.geo";
// Include "../A04Str0Wr12/mmGasA04Str0Wr12S1y2Wire.geo";
// Include "../A04Str0Wr12/mmGasA04Str0Wr12Tx1y1x2y2Wire.geo";

// Include "../A04Wr12/mmGasA04Wr12CompLab.pro";
// Include "../A04Wr12/mmGasA04Wr12D2x1WireCompLab.pro";
// Include "../A04Wr12/mmGasA04Wr12D2x2y2WireCompLab.pro";
// Include "../A04Wr12/mmGasA04Wr12D2y1WireCompLab.pro";
// Include "../A04Wr12/mmGasA04Wr12S1x1y1WireCompLab.pro";
// Include "../A04Wr12/mmGasA04Wr12S1x2WireCompLab.pro";
// Include "../A04Wr12/mmGasA04Wr12S1y2WireCompLab.pro";
// Include "../A04Wr12/mmGasA04Wr12Tx1y1x2y2WireCompLab.pro";

// Include "../A05Param/mmGasA05CompLab.pro";
// Include "../A05Param/mmGasA05MaterialDatabase.pro";
// Include "../A05Param/mmGasA05MaterialMacros.pro";
// Include "../A05Param/mmGasA05MeshOp.pro";

// Include "../A05Param/mmGasA05Param.geo";

// Include "../A06Solver/mmGasA06SolverElectrostaticsV.pro";
// Include "../A06Solver/mmGasA06SolverElectrostaticsV2.pro";
// Include "../A06Solver/mmGasA06SolverIntegrationLib.pro";
// Include "../A06Solver/mmGasA06SolverJacobianLib.pro";
// Include "../A06Solver/mmGasA06SolverOp.pro";

// Include "../A07PipeData/mmGasA07PipeData.pro";


/// MATERIAL MACROS MODULE
/// MATERIAL STRUCTURE
//----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
//// Variable designation: geometrical element, structural reference, interface / description, number

Macro DefineMaterialFunctions

  n = Str[_MaterialName_];

  // --------------------------------------------------------------
  // Linear magnetic materials
  // --------------------------------------------------------------

  If(Exists[StringToName[StrCat[n, "_mur"]]])
    If(Exists[linearMagneticMaterials] && !StrFind[n, "UserMaterial"])
      linearMagneticMaterials() += Str[n];
    EndIf
  EndIf

  // --------------------------------------------------------------
  // Nonlinear magnetic materials
  // --------------------------------------------------------------

  // create intermediate lists and functions for interpolation of point data
  If(Exists[StringToName[StrCat[n, "_b_list"]]] &&
     Exists[StringToName[StrCat[n, "_h_list"]]])
    Parse[ StrCat[
      n, "_b2_list() = ", n, "_b_list()^2;",
      n, "_h2_list() = ", n, "_h_list()^2;",
      n, "_nu_list() = ", n, "_h_list() / ", n, "_b_list();",
      n, "_nu_list(0) = ", n, "_nu_list(1);",
      n, "_mu_list() = ", n, "_b_list() / ", n, "_h_list();",
      n, "_mu_list(0) = ", n, "_mu_list(1);",
      n, "_nu_b2_list() = ListAlt[", n, "_b2_list(),", n, "_nu_list()];",
      n, "_mu_h2_list() = ListAlt[", n, "_h2_list(),", n, "_mu_list()];",
      n, "_nu[] = InterpolationLinear[SquNorm[$1]]{", n, "_nu_b2_list()};",
      n, "_dnudb2[] = dInterpolationLinear[SquNorm[$1]]{", n, "_nu_b2_list()};",
      n, "_mu[] = InterpolationLinear[SquNorm[$1]]{", n, "_mu_h2_list()};",
      n, "_dmudh2[] = dInterpolationLinear[SquNorm[$1]]{", n, "_mu_h2_list()};"
    ] ];
  EndIf

  // create h[], dhdb[], dhdb_NL[], b[], dbdh[] and dbdh_NL[] functions
  If(Exists[StringToName[StrCat[n, "_nu"]][]] &&
     Exists[StringToName[StrCat[n, "_dnudb2"]][]] &&
     Exists[StringToName[StrCat[n, "_mu"]][]] &&
     Exists[StringToName[StrCat[n, "_dmudh2"]][]])
    Parse[ StrCat[
      n, "_h[] = ", n, "_nu[$1] * $1;",
      n, "_dhdb[] = TensorDiag[1,1,1] * ", n, "_nu[$1#1] + 2 * ", n,
      "_dnudb2[#1] * SquDyadicProduct[#1];",
      n, "_dhdb_NL[] = 2 * ", n, "_dnudb2[$1#1] * SquDyadicProduct[#1];",
      n, "_b[] = ", n, "_mu[$1] * $1;",
      n, "_dbdh[] = TensorDiag[1,1,1] * ", n, "_mu[$1#1] + 2 * ", n,
      "_dmudh2[#1] * SquDyadicProduct[#1];",
      n, "_dbdh_NL[] = 2 * ", n, "_dmudh2[$1#1] * SquDyadicProduct[#1];"
    ] ];
    If(Exists[nonlinearMagneticMaterials] && !StrFind[n, "UserMaterial"])
      nonlinearMagneticMaterials() += Str[n];
    EndIf
  EndIf

  // --------------------------------------------------------------
  // Permanent magnets
  // --------------------------------------------------------------

  If(Exists[StringToName[StrCat[n, "_hc"]]])
    If(Exists[permanentMagnetMaterials] && !StrFind[n, "UserMaterial"])
      permanentMagnetMaterials() += Str[n];
    EndIf
  EndIf

  // --------------------------------------------------------------
  // Linear dielectric materials
  // --------------------------------------------------------------

  If(Exists[StringToName[StrCat[n, "_epsilonr"]]])
    If(Exists[linearDielectricMaterials] && !StrFind[n, "UserMaterial"])
      linearDielectricMaterials() += Str[n];
    EndIf
  EndIf

Return


// End
